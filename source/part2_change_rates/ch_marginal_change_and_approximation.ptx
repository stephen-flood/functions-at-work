<?xml version="1.0" encoding="UTF-8"?>

<chapter xml:id="ch_marginalcost" xmlns:xi="http://www.w3.org/2001/XInclude">
  <title>Derivatives and Business</title>


  <section xml:id="sec-marginalcost">
    <title>Marginal Cost</title>
    <introduction>
      <p>
        Derivatives provide a powerful tool for studying many concepts in economics and buisness.  In this section, we will introduce a central application in the context of cost, revenue, and profit functions.  
        Recall that 
        <ul>
          <li>
            <p>
              <m>C(x) = </m> <em>total</em> cost in $.  For example, <m>C(10)</m> is the <em>cumulative</em> cost of items 1-10.  
            </p>
          </li>
          <li>
            <p>
              <m>R(x) = </m> <em>total</em> revenue in $.  For example, <m>R(10)</m> is the <em>total</em> revenue of items 1-10.
            </p>
          </li>
          <li>
            <p>
              <m>P(x) = </m> <em>total</em> profit in $.  For example, <m>P(10)</m> is the <em>total</em> revenue of items 1-10. 
            </p>
          </li>
        </ul>
      </p>
    </introduction>
    
    <definition xml:id="defn_marginalcost">
      <statement>
        <p>
          Let <m>C(x)</m> be a total cost function. 
          The <term>marginal cost function</term> is the derivative of total cost.  
          Furthermore, 
          <me>
            C'(x) = \text{ the APPROXIMATE cost of the NEXT item in \$/item }
          </me>
        </p>
      </statement>
    </definition>
  
    <exploration xml:id="ex_marginalcost1">
      <statement>
        <p>
          Suppose that <m>C'(200) = 5</m> $/item.  
          Estimate the cost of the 201st item <em>only</em>. 
        </p>
      </statement>
      <solution>
        <p>
          By <xref ref="defn_marginalcost"/>, 
          <m>C'(200) = </m> the cost of the next item only.
        </p>
        <p>
          The next item after 200 is the <em>201st</em> item.  That means that The approximate cost of the 201st item is 5$.
        </p>
      </solution>
    </exploration>
  
  
    <exploration xml:id="ex_marginalcost2">
      <introduction>
        <p>
          Suppose that <m>C(x) = 120 + 5x - 0.1 x^2</m>
        </p>
      </introduction>
      <task>
        <statement>
          <p>
            What is the <em>approximate</em> cost of the 11th item only?
          </p>
        </statement>
        <solution>
          <p>
            By <xref ref="defn_marginalcost"/>, when we are asked to <em>approximate</em> the cost of the next item, we must find and use the marginal cost function.  
          </p>
          <p> 
            To find the marginal cost function, use the derivative shortcuts
            <md>
              <mrow> C'(x) = \amp \ddx{ 120 + 5x - 0.1x^2 }</mrow>
              <mrow>= \amp \ddx{120} + \ddx{5x} - \ddx{0.1x^2}</mrow>
              <mrow>= \amp 0 + 5 - 0.1\cdot \ddx{x^2}</mrow>
              <mrow>= \amp 5 - 0.1\cdot 2x</mrow>
              <mrow>= \amp 5 - 0.2x</mrow>
            </md>
          </p>
          <p>
            To use the marginal cost function, recall that 
            <me>
              C'(x) = \text{ the APPROXIMATE cost of the NEXT item in \$/item }
            </me>
            We want to find the approximate cost of the 11th item. 
            Item 11 is the item that is <em>immediately after item 10</em>.
          </p>
          <p>
            In other words, compute <m>C'(10)</m>.
            That will tell us the approximate cost of the item <em>after</em> 10, which is the 11th item.  
            <me>
              C'(10) = 5 - 0.2\cdot 10 = 3
            </me>
            The 11th item will cost approximately 3$.
          </p>
        </solution>
      </task>
      <task>
        <statement>
          <p>
            What is the <em>exact</em> cost of the 11th item only?
          </p>
        </statement>
        <solution>
          <p>
            By definition, the total cost function <m>C(x)</m> gives the <em>cumulative</em> cost of items <m>1</m> through <m>x</m>.  
          </p>
          <p>
            In other words, <m>C(11)</m> tells you the <em>cumulative</em> cost of items 1-11, and <m>C(10)</m> tells you the <em>cumulative</em> cost of items 1-10.  
          </p>
          <p>
            <md>
              <mrow>   \amp\amp C(11) = \amp \text{ total cost of items 1-11}  \amp </mrow>
              <mrow> -\amp\Big(\amp C(10) = \amp \text{ total cost of items 1-10} \amp \Big) </mrow>
              <mrow> \hline </mrow>
              <mrow>\amp \amp \amp \text{cost of 11th item only} \amp </mrow>
            </md>
          </p>
          <p>
            In other words, the cost of the 11th item only is equal to 
            <md>
              <mrow>= \amp C(11) - C(10)</mrow>
              <mrow>= \amp \Big( 120 + 5\cdot 11 - 0.1(11)^2\Big) - \Big(120 + 5\cdot 10 - 0.1(10)^2\Big)   </mrow>
              <mrow>= \amp 162.9 - 160</mrow>
              <mrow>= \amp 2.9</mrow>
            </md>
            The exact cost of the 11th item only is $2.90
          </p>
        </solution>
      </task>
    </exploration>
  
    <exploration xml:id="ex_marginalcost3">
      <introduction>
        <p>
          You are making 100 trailers, and the total cost function is given by <m>C(x) = 25,000 + 5x^3</m>
        </p>
      </introduction>
      <task>
        <statement>
          <p>
            What is the <em>exact</em> cost of the 100th trailer?
          </p>
        </statement>
        <solution>
          <p>
            Recall that <m>C(100) = </m> total/cumulative cost of items 1 to 100.  Using the equation given, 
            <me>
              C(100) = 25,000 + 5\cdot 100^3 = 5,025,000
            </me>
            We don't want to know the cost of <em>all</em> of these items, just the last item.  To get rid of items 1-99, we compute their cost separately
            <me>
              C(99) = 25,000 + 5\cdot 99^3 = 4,876,495
            </me>
            Subtracting out the items we don't care about, we get
  
            <md>
              <mrow>\text{cost of 100th only} = \amp C(100) - C(99) </mrow>
              <mrow>= \amp 5,025,000 - 4,876,495</mrow>
              <mrow>= \amp 148,505</mrow>
            </md>
            
            The 100th trailer only costs exactly $148,505.
          </p>
        </solution>
      </task>
      <task>
        <statement>
          <p>
            What is the <em>approximate</em> cost of the 100th trailer?
          </p>
        </statement>
        <solution>
          <p>
            By <xref ref="defn_marginalcost"/>, when we are asked to <em>approximate</em> the cost of the next item, we must find and use the marginal cost function.  
          </p>
          <p> 
            To find the marginal cost function, use the derivative shortcuts
            <md>
              <mrow> C'(x) = \amp \ddx{ 25,000 + 5x^3 }</mrow>
              <mrow>= \amp \ddx{25,000} + \ddx{5x^3}</mrow>
              <mrow>= \amp 0 + 5\cdot \ddx{x^3}</mrow>
              <mrow>= \amp 5 \cdot 3x^2</mrow>
              <mrow>= \amp 15 x^2</mrow>
            </md>
          </p>
          <p>
            To use the marginal cost function, recall that 
            <me>
              C'(x) = \text{ the APPROXIMATE cost of the NEXT item in \$/item }
            </me>
            We want to find the approximate cost of the 100th item only. 
            Item 100 is the item that is <em>immediately after item 99</em>.
          </p>
          <p>
            In other words, compute <m>C'(99)</m>.
            <me>
              C'(99) = 15 \cdot 99^2 = 147,015
            </me>
            The 11th item will cost approximately $147,015.
          </p>
        </solution>
      </task>
    </exploration>
  
    <p>
      The example above helps explain part of the value of using the marginal cost function, instead of always finding exact cost.  
      Computing the exact meant talking about costs in the millions, even though the individual item's value was only in the hundreds of thousands.  
      Even better, once we have computed the equation for marginal cost function we can quickly compare the item cost for a range of numbers of items.
    </p>
  
    <insight>
      <title>Why Derivatives Approximate the Cost of the Next Item</title>
      
      <p>
        What is the connection between derivatives and approximate item cost? 
      </p>
      <p>
        Looking at the units of measurement provides one way of understanding the connection.  If total cost <m>C(x)</m> is measured in dollars, and quantity <m>x</m> is measured in items, then 
        <me>
          C'(x) = \lim_{\Delta x\rightarrow 0} = \dfrac{\Delta C}{\Delta x} \ \dfrac{\text{\$}}{\text{item}} 
        </me>
        In other words, because the derivative of cost has units $/item, it tells you approximately how many $ an individual item will cost.
      </p>
      <p>
        Why does the marginal cost tell us the cost of the <em>next</em> item?   
      </p>
      <p>
        Remember that limits arise in business when quantities are large.  For example, suppose that <m>x</m> is 5000 items. 
      </p>
      <p>
        Expanding out the limit definition of slope/IROC, we get
        <md>
          <mrow>C'(5000) \amp = \lim_{\Delta x \rightarrow 0}\dfrac{\Delta C}{\Delta x} </mrow>
          <mrow>= \amp \lim_{\Delta x \rightarrow 0} \dfrac{C_2 - C_1}{x_2 - x_1}</mrow>
          <mrow>= \amp \lim_{\Delta x \rightarrow 0} \dfrac{C(5000 + \Delta x) - C(5000)}{\Delta x}</mrow>
        </md>
        Because <m>x=5000</m> is large, then a change of <m>\Delta x=1</m> more item is (relatively) small.
        This means that 
        <me>
          C'(5000) \approx  \dfrac{C(5000 + 1) - C(5000)}{\Delta x}
        </me>
        simpilfying this gives 
        <me>
          C'(5000) \approx  C(5001) - C(5000) 
        </me>
        which is equal to the 5001st item, which is the <em>next</em> item after 5000.
      </p>
    </insight>
  
  
    <paragraphs>
      <title>Understanding Change, AROC, and IROC</title>
      
      <p>
        We now have several tools for analyzing economic questions: <em>change <m>\Delta C</m></em>, average rate <m>\frac{\Delta C}{\Delta x}</m>, and marginal cost <m>C'(x) = \frac{dC}{dx}</m>.  
        Always make sure you understand what the question is asking for, and know how to apply the correct tool for that question. 
      </p>
  
      <dl>
        <li>
          <title><em>Average</em> and <em>Change</em> look Backward</title>
          <p>
            If you <em>have moved</em> from <m>x_1</m> to <m>x_2</m> items, then you can compute the change 
            <me>
              \Delta C = C_2 - C_1 
            </me>
            and the average rate (AROC) 
            <me>
              \frac{\Delta C}{\Delta x} = \dfrac{C_2 - C_1}{x_2-x_1}
            </me>
            Finding the exact cost of a single item is a special case of finding the change in cost.  
          </p>
          <p>
            For example, to find the exact cost of item 105, compute <m>C(105)-C(104)</m>.  This can be thought of as a change <m>\Delta C</m>, or an average change <m>\frac{\Delta C}{\Delta x}</m> with <m>\Delta x=1</m>
          </p>
          <p>
            Change and AROC are used for <em>accounting</em> for changes in the <em>past</em>. 
          </p>
        </li>
        <li>
          <title><em>Marginal Cost</em> and <em>Derivatives</em> look Foreward</title>
          <p>
            <md>
              <mrow> C'(x) \approx \amp \text{ cost of the NEXT ITEM after} x  </mrow>
              <mrow>\approx \amp \text{ cost of the } (x+1)^{st} \text{ item} </mrow>
            </md>
            Marginal cost and derivatives are used to make <em>decisions</em> about the <em>future</em>
          </p>
        </li>
      </dl>
  
    </paragraphs>
  
    <p>
      The power of mathematics is that the same tools apply to a range of contexts. 
    </p>
  
    <definition xml:id="def-marginalfunctions">
      <statement>
        <p>
          Let <m>F(x)</m> be any <em>total</em> or cumulatve function, such as cost, revenue, or profit. 
          The <em>marginal function</em> is 
          <me>
            F'(x) = \text{ the APPROXIMATE value of the NEXT ITEM ONLY} 
          </me>
        </p>
      </statement>
    </definition>
  
    <p>
      In other words, if <m>R(x) = </m> total revenue and <m>P(x) = </m> total profit, 
      then 
        <m>R'(500) = </m> approximate revenue of the next (501st) item 
        and 
        <m>P'(500) = </m> approximate revenue of the next (501st) item 
    </p>
  
  
    <paragraphs>
      <title>Beautiful Consequence</title>
      <p>
        The <em>slope of <alert>total</alert> profit at <m>x=a</m> items </em>
        is approximately equal to 
        the <em> profit  </em>
      </p>
    </paragraphs>
  
    <!-- TODO: Graphical Example where you use the GRAPH of total profit to find MARIGNAL profit and then use THAT to understand profit from a SPEICFIC ITEM. -->
    <!--exploration>
      <introduction>
        <p>
          
        <interactive platform="jsxgraph" width="60%">
          <slate xml:id="jsxgraph-findingmarginalprofitfromgraph"  surface="jessiecode" axis="true" grid="true" >
            $board.setBoundingBox( [ -2, 5, 5, -2 ] , keepaspectratio=true) ;
  
            xslider = slider(
                  // Specify slider location
                    [0.5,-1.25], [3.5,-1.25], 
                  // Specify smallest/starting/largest value for slider
                    [0,1,4.9])
                &lt;&lt;
                    name:"a",
                    snapWidth:0.1
                &gt;&gt;  ;      
  
              splinefunction = function(x,x1,y1,m1,x2,y2,m2){
                return  ( (((m1) + (m2))*(x1) - ((m1) + (m2))*(x2) - 2*(y1) + 2*(y2))/((x1)^3 - 3*((x1)^2)*(x2) + 3*(x1)*((x2)^2) - (x2)^3) )*((x)^3) + ( -(((m1) + 2*(m2))*((x1)^2) + ((m1) - (m2))*(x1)*(x2) - (2*(m1) + (m2))*((x2)^2) - 3*((x1) + (x2))*(y1) + 3*((x1) + (x2))*(y2))/((x1)^3 - 3*((x1)^2)*(x2) + 3*(x1)*((x2)^2) - (x2)^3) ) *((x)^2) + ( ((m2)*((x1)^3) + (2*(m1) + (m2))*((x1)^2)*(x2) - ((m1) + 2*(m2))*(x1)*((x2)^2) - (m1)*((x2)^3) - 6*(x1)*(x2)*(y1) + 6*(x1)*(x2)*(y2))/((x1)^3 - 3*((x1)^2)*(x2) + 3*(x1)*((x2)^2) - (x2)^3) ) * (x) + ( -((m2)*((x1)^3)*(x2) + ((m1) - (m2))*((x1)^2)*(x2)^2 - (m1)*(x1)*((x2)^3) - (3*(x1)*((x2)^2) - (x2)^3)*(y1) - ((x1)^3 - 3*((x1)^2)*(x2))*(y2))/((x1)^3 - 3*((x1)^2)*(x2) + 3*(x1)*((x2)^2) - (x2)^3)) ;
              } ;
              
              f1 = function(x) { 
                // TODO: Match spline functions and cases from example statement!!!!
                if (0 &lt;= x &amp;&amp; x &lt;1) { 
                  return splinefunction(x,0,1,0.5,1,3,1); 
                } else if (1 &lt;= x &amp;&amp; x &lt;2 ) { 
                  return splinefunction(x,1,3,1,2,3.75,0)   ;
                }  else if (2 &lt;= x &amp;&amp; x &lt;3 ) { 
                  return splinefunction(x,2,3.75,0,3,0.5,-1)   ;
                } else if (3 &lt;= x &amp;&amp; x &lt;4 ) { 
                  return splinefunction(x,3,0.5,-1,4,-0.5,0)   ;
                } else if (4 &lt;= x &amp;&amp; x &lt;= 5 ) { 
                  return splinefunction(x,4,-0.5,0,5,-1,-1)   ;
                } else {
                  return 0;
                };
              } ;
              tangentline = function(x) {
                x0 =  xslider.Value();
                m = (f1(x0+0.00001) - f1(x0))/0.00001;
                return m*(x-x0) + f1(x0) ; 
              } ;
  
              // Graph the function and 
              f1Graph = functiongraph( f1 )  
                &lt;&lt; 
                    strokeColor:"blue"  
                &gt;&gt;;
              tangentGraph = functiongraph( tangentline )  
                &lt;&lt; 
                    strokeColor:"black",
                    dash:3  
                &gt;&gt;;
              //text( 0.5,6.5,function() {
              //      x0 =  xslider.Value();
              //      m = (f1(x0+0.00001) - f1(x0))/0.00001;
              //      return  "The tangent at a=" + trunc(x0,2) + " has slope m="+ trunc(m,2) + " and equation";
              //      } 
              //    ) 
              //          &lt;&lt; 
              //            color:"black",
              //            fontSize:16
              //          &gt;&gt; ;
              //text( 1.5,5.5,function() {
              //      x0 =  xslider.Value();
              //      m = (f1(x0+0.00001) - f1(x0))/0.00001;
              //      y0 = f1(x0);
              //      return  "y  =  "+ trunc(m,2) + " ( x- " + trunc(x0,2) + " )  +  " + trunc(y0,2) ;
              //      } 
              //    ) 
              //          &lt;&lt; 
              //            color:"black",
              //            fontSize:16
              //          &gt;&gt; ;
  
              // Graph the lines from the point to the x and y axis
              //    (put these first so they go behind the function and points)
              line( [function() {return xslider.Value();} ,
                          function() {return f1(xslider.Value());}],[0,function() {return f1(xslider.Value());}] )
                        &lt;&lt; 
                          color:"red",
                          straightFirst:false, 
                          straightLast:false,
                          dash:1
                        &gt;&gt; ;
              line( [function() {return xslider.Value();} ,
                          function() {return f1(xslider.Value());}],[function() {return xslider.Value();}, 0 ] )
                        &lt;&lt; 
                          color:"red",
                          straightFirst:false, 
                          straightLast:false,
                          dash:1
                        &gt;&gt; ;
  
  
              // Graph point that follows the function
              point( function() {return xslider.Value();} ,
                          function() {return f1(xslider.Value());}) 
                        &lt;&lt; 
                          name:"(a,f(a))",
                          color:"red" 
                        &gt;&gt; ;
              text( -0.75, function() {return f1(xslider.Value());}, "f(a)") 
                        &lt;&lt; 
                          color:"red" 
                        &gt;&gt; ;
              text( function() {return xslider.Value();} , -0.25 , "a") 
                        &lt;&lt; 
                          color:"red" 
                        &gt;&gt; ;
  
          </slate>
        </interactive>
        </p>
      </introduction>
      
    </exploration-->
  
  
  </section>
  
  <!-- TODO: Add section on linear approximations -->
  <!-- section xml:id="sec-linearapproximation">
    <title>Linear Approximations</title>
  
    <figure>
        <interactive platform="jsxgraph"  source="jsxgraph/derivative-linear-approximation.js" >
          <slate xml:id="jsxgraph-derivative-linear-approximation" surface="jsxboard"   /> 
          <instructions>
            <p>
            
            </p>
          </instructions>
        </interactive>
      </figure>
  </section-->




</chapter>
